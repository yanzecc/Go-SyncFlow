import{G as e,E as l}from"./elementPlus-DW6qdM9Z.js";import{k as a,e as o,_ as d}from"./index-D9Oaf6TO.js";import{v as n,k as t,D as u,E as i,F as p,r as c,ac as s,y as m,P as r,z as f,S as g,U as V,G as _,M as h,R as y,a6 as b,u as v,l as U,c as w,ad as I}from"./vendor-DDTA3iPl.js";const k={class:"notify-page"},A={class:"card-header"},S={key:1,class:"text-muted"},T={class:"operation-buttons"},q={class:"preview-box"},C=d(n({__name:"NotifyChannels",setup(d){const n=c(!1),C=c(!1),D=c([]),K=c(!1),x=c(null),P=c([]),M=c([]),N={smtp_host:"",smtp_port:465,smtp_user:"",smtp_password:"",smtp_tls:"ssl",from:"",from_name:"",recipients:"",url:"",method:"POST",contentType:"application/json",headers:[],bodyTemplate:"",phones:"",signType:"none",signSecret:"",signHeader:"X-Signature-256",tokenValue:"",tokenPosition:"header",tokenHeader:"Authorization",templateCodeMap:{verify_code:"",password_reset:"",security_alert:""},templateIdMap:{verify_code:"",password_reset:"",security_alert:""},testUserID:"",sign:""},z=U({name:"",channelType:"email",isActive:!0,config:{...N}}),H={email:"邮件",webhook:"Webhook",sms_aliyun:"阿里云短信",sms_tencent:"腾讯云短信",sms_huawei:"华为云短信",sms_baidu:"百度云短信",sms_ctyun:"天翼云短信",sms_yunpian:"云片短信",sms_chuanglan:"创蓝短信",sms_ronghe:"融合云信",sms_cmcc:"移动云MAS",sms_cmcc_5g:"移动5G消息",sms_wecom:"企业微信",sms_dingtalk:"钉钉",sms_feishu:"飞书",sms_https:"HTTPS自定义",sms_custom:"HTTPS自定义",dingtalk_work:"钉钉工作消息"},R=e=>H[e]||e,E=async()=>{n.value=!0;try{const e=await a.notifyChannels();e.data.success&&(D.value=e.data.data||[])}finally{n.value=!1}},G=()=>{x.value=null,z.name="",z.channelType="email",z.isActive=!0,z.config={...N},K.value=!0},L=()=>{z.config={...N}},j=()=>{z.config.headers||(z.config.headers=[]),z.config.headers.push({key:"",value:""})},O=async()=>{if(z.name){C.value=!0;try{x.value?await a.updateNotifyChannel(x.value,z):await a.createNotifyChannel(z),l.success("保存成功"),K.value=!1,E()}finally{C.value=!1}}else l.warning("请输入名称")},W=c(!1),$=c(!1),X=c(null),Y=U({recipient:"",message:"",templateId:0}),B=e=>{if(0===e)return void(Y.message="");const l=M.value.find(l=>l.id===e);l&&(Y.message=l.content)},F=w(()=>{let e=Y.message||"";const l=(new Date).toLocaleString("zh-CN");return e=e.replace(/\{\{username\}\}/g,"testuser"),e=e.replace(/\{\{nickname\}\}/g,"测试用户"),e=e.replace(/\{\{name\}\}/g,"张三"),e=e.replace(/\{\{code\}\}/g,"283746"),e=e.replace(/\{\{time\}\}/g,l),e=e.replace(/\{\{ip\}\}/g,"192.168.1.100"),e=e.replace(/\{\{app_name\}\}/g,"统一身份认证平台"),e}),J=async()=>{var e,o;if(!Y.recipient)return void l.warning("请选择或输入收件人");if(!Y.message)return void l.warning("请输入消息内容");let d=Y.message;const n=(new Date).toLocaleString("zh-CN");d=d.replace(/\{\{username\}\}/g,"testuser"),d=d.replace(/\{\{nickname\}\}/g,"测试用户"),d=d.replace(/\{\{name\}\}/g,"张三"),d=d.replace(/\{\{code\}\}/g,String(Math.floor(1e5+9e5*Math.random()))),d=d.replace(/\{\{time\}\}/g,n),d=d.replace(/\{\{ip\}\}/g,"127.0.0.1"),d=d.replace(/\{\{app_name\}\}/g,"统一身份认证平台"),$.value=!0;try{const e=await a.testNotifyChannel(X.value.id,{recipient:Y.recipient,message:d});e.data.success?l.success("测试消息发送成功"):l.error(e.data.message||"发送失败"),E()}catch(t){const a=(null==(o=null==(e=null==t?void 0:t.response)?void 0:e.data)?void 0:o.message)||"发送失败";l.error(a),E()}finally{$.value=!1}};return t(()=>{E(),(async()=>{var e;try{const l=await o.list({pageSize:500});l.data.success&&(P.value=(null==(e=l.data.data)?void 0:e.list)||l.data.data||[])}catch{}})(),(async()=>{try{const e=await a.getTemplates();e.data.success&&(M.value=(e.data.data||[]).filter(e=>e.isActive))}catch{}})()}),(o,d)=>{const t=s("el-button"),c=s("el-table-column"),U=s("el-tag"),w=s("el-popconfirm"),H=s("el-table"),Q=s("el-card"),Z=s("el-input"),ee=s("el-form-item"),le=s("el-option"),ae=s("el-option-group"),oe=s("el-select"),de=s("el-switch"),ne=s("el-divider"),te=s("el-col"),ue=s("el-input-number"),ie=s("el-row"),pe=s("el-radio-button"),ce=s("el-radio-group"),se=s("el-alert"),me=s("el-form"),re=s("el-dialog"),fe=I("loading");return m(),u("div",k,[i(Q,null,{header:p(()=>[_("div",A,[d[115]||(d[115]=_("span",null,"通知渠道管理",-1)),i(t,{type:"primary",size:"small",onClick:G},{default:p(()=>[...d[114]||(d[114]=[g("添加渠道",-1)])]),_:1})])]),default:p(()=>[r((m(),f(H,{data:D.value,stripe:""},{default:p(()=>[i(c,{prop:"name",label:"名称","min-width":"100"}),i(c,{prop:"channelType",label:"类型",width:"120"},{default:p(({row:e})=>[i(U,{size:"small"},{default:p(()=>[g(V(R(e.channelType)),1)]),_:2},1024)]),_:1}),i(c,{prop:"isActive",label:"状态",width:"80",align:"center"},{default:p(({row:e})=>[i(U,{type:e.isActive?"success":"info",size:"small"},{default:p(()=>[g(V(e.isActive?"启用":"停用"),1)]),_:2},1032,["type"])]),_:1}),i(c,{prop:"testResult",label:"测试结果",width:"100",align:"center"},{default:p(({row:e})=>[e.testResult?(m(),f(U,{key:0,type:"成功"===e.testResult?"success":"danger",size:"small"},{default:p(()=>[g(V(e.testResult),1)]),_:2},1032,["type"])):(m(),u("span",S,"未测试"))]),_:1}),i(c,{prop:"updatedAt",label:"更新时间",width:"150"},{default:p(({row:e})=>{return[g(V((l=e.updatedAt,l?new Date(l).toLocaleString("zh-CN"):"-")),1)];var l}),_:1}),i(c,{label:"操作",width:"200",fixed:"right"},{default:p(({row:e})=>[_("div",T,[i(t,{type:"primary",size:"small",onClick:l=>(e=>{var l,a,o;X.value=e,Y.recipient="",Y.templateId=0;const d=M.value.find(e=>"test"===e.scene);if(Y.message=(null==d?void 0:d.content)||"【测试】这是一条测试消息，收到请忽略。",d&&(Y.templateId=d.id),null==(l=e.channelType)?void 0:l.startsWith("sms_")){const l=null==(a=e.config)?void 0:a.phones;l&&(Y.recipient=l.split(",")[0].trim())}else"dingtalk_work"===e.channelType&&(Y.recipient=(null==(o=e.config)?void 0:o.testUserID)||"");W.value=!0})(e)},{default:p(()=>[...d[116]||(d[116]=[g("测试",-1)])]),_:1},8,["onClick"]),i(t,{type:"primary",size:"small",onClick:l=>(e=>{x.value=e.id,z.name=e.name,z.channelType=e.channelType,z.isActive=e.isActive,z.config={...N,...e.config},z.config.headers||(z.config.headers=[]),K.value=!0})(e)},{default:p(()=>[...d[117]||(d[117]=[g("编辑",-1)])]),_:1},8,["onClick"]),i(w,{title:"确定删除此渠道?",onConfirm:o=>(async e=>{try{await a.deleteNotifyChannel(e),l.success("删除成功"),E()}catch(o){l.error("删除失败")}})(e.id)},{reference:p(()=>[i(t,{type:"danger",size:"small"},{default:p(()=>[...d[118]||(d[118]=[g("删除",-1)])]),_:1})]),_:1},8,["onConfirm"])])]),_:1})]),_:1},8,["data"])),[[fe,n.value]])]),_:1}),i(re,{modelValue:K.value,"onUpdate:modelValue":d[106]||(d[106]=e=>K.value=e),title:x.value?"编辑渠道":"添加渠道",width:"550px","destroy-on-close":""},{footer:p(()=>[i(t,{onClick:d[105]||(d[105]=e=>K.value=!1)},{default:p(()=>[...d[165]||(d[165]=[g("取消",-1)])]),_:1}),i(t,{type:"primary",onClick:O,loading:C.value},{default:p(()=>[...d[166]||(d[166]=[g("保存",-1)])]),_:1},8,["loading"])]),default:p(()=>[i(me,{model:z,"label-width":"100px"},{default:p(()=>[i(ee,{label:"名称",required:""},{default:p(()=>[i(Z,{modelValue:z.name,"onUpdate:modelValue":d[0]||(d[0]=e=>z.name=e),placeholder:"渠道名称"},null,8,["modelValue"])]),_:1}),i(ee,{label:"类型",required:""},{default:p(()=>[i(oe,{modelValue:z.channelType,"onUpdate:modelValue":d[1]||(d[1]=e=>z.channelType=e),style:{width:"100%"},onChange:L,disabled:!!x.value},{default:p(()=>[i(ae,{label:"通用"},{default:p(()=>[i(le,{label:"邮件",value:"email"}),i(le,{label:"Webhook",value:"webhook"})]),_:1}),i(ae,{label:"云厂商短信"},{default:p(()=>[i(le,{label:"阿里云短信",value:"sms_aliyun"}),i(le,{label:"腾讯云短信",value:"sms_tencent"}),i(le,{label:"华为云短信",value:"sms_huawei"}),i(le,{label:"百度云短信",value:"sms_baidu"}),i(le,{label:"天翼云短信",value:"sms_ctyun"})]),_:1}),i(ae,{label:"第三方短信"},{default:p(()=>[i(le,{label:"云片短信",value:"sms_yunpian"}),i(le,{label:"创蓝短信",value:"sms_chuanglan"}),i(le,{label:"融合云信",value:"sms_ronghe"}),i(le,{label:"移动云MAS",value:"sms_cmcc"}),i(le,{label:"移动5G消息",value:"sms_cmcc_5g"})]),_:1}),i(ae,{label:"IM平台"},{default:p(()=>[i(le,{label:"企业微信",value:"sms_wecom"}),i(le,{label:"钉钉",value:"sms_dingtalk"}),i(le,{label:"飞书",value:"sms_feishu"}),i(le,{label:"钉钉工作消息",value:"dingtalk_work"})]),_:1}),i(ae,{label:"自定义"},{default:p(()=>[i(le,{label:"HTTPS自定义",value:"sms_https"})]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),i(ee,{label:"启用"},{default:p(()=>[i(de,{modelValue:z.isActive,"onUpdate:modelValue":d[2]||(d[2]=e=>z.isActive=e)},null,8,["modelValue"])]),_:1}),"email"===z.channelType?(m(),u(h,{key:0},[i(ne,{"content-position":"left"},{default:p(()=>[...d[119]||(d[119]=[g("SMTP配置",-1)])]),_:1}),i(ee,{label:"SMTP服务器",required:""},{default:p(()=>[i(ie,{gutter:12},{default:p(()=>[i(te,{span:16},{default:p(()=>[i(Z,{modelValue:z.config.smtp_host,"onUpdate:modelValue":d[3]||(d[3]=e=>z.config.smtp_host=e),placeholder:"smtp.example.com"},null,8,["modelValue"])]),_:1}),i(te,{span:8},{default:p(()=>[i(ue,{modelValue:z.config.smtp_port,"onUpdate:modelValue":d[4]||(d[4]=e=>z.config.smtp_port=e),min:1,max:65535,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(ee,{label:"加密方式"},{default:p(()=>[i(ce,{modelValue:z.config.smtp_tls,"onUpdate:modelValue":d[5]||(d[5]=e=>z.config.smtp_tls=e)},{default:p(()=>[i(pe,{value:"ssl"},{default:p(()=>[...d[120]||(d[120]=[g("SSL/TLS (465)",-1)])]),_:1}),i(pe,{value:"starttls"},{default:p(()=>[...d[121]||(d[121]=[g("STARTTLS (587)",-1)])]),_:1}),i(pe,{value:"none"},{default:p(()=>[...d[122]||(d[122]=[g("无加密 (25)",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(ee,{label:"用户名",required:""},{default:p(()=>[i(Z,{modelValue:z.config.smtp_user,"onUpdate:modelValue":d[6]||(d[6]=e=>z.config.smtp_user=e),placeholder:"登录邮箱账号"},null,8,["modelValue"])]),_:1}),i(ee,{label:"密码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.smtp_password,"onUpdate:modelValue":d[7]||(d[7]=e=>z.config.smtp_password=e),type:"password","show-password":"",placeholder:"SMTP密码或授权码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"发件人地址",required:""},{default:p(()=>[i(Z,{modelValue:z.config.from,"onUpdate:modelValue":d[8]||(d[8]=e=>z.config.from=e),placeholder:"noreply@example.com"},null,8,["modelValue"])]),_:1}),i(ee,{label:"发件人名称"},{default:p(()=>[i(Z,{modelValue:z.config.from_name,"onUpdate:modelValue":d[9]||(d[9]=e=>z.config.from_name=e),placeholder:"统一身份认证平台（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"收件人"},{default:p(()=>[i(Z,{modelValue:z.config.recipients,"onUpdate:modelValue":d[10]||(d[10]=e=>z.config.recipients=e),placeholder:"默认收件人，多个邮箱用逗号分隔（可选，测试用）"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"webhook"===z.channelType?(m(),u(h,{key:1},[i(ne,{"content-position":"left"},{default:p(()=>[...d[123]||(d[123]=[g("Webhook配置",-1)])]),_:1}),i(ee,{label:"URL",required:""},{default:p(()=>[i(Z,{modelValue:z.config.url,"onUpdate:modelValue":d[11]||(d[11]=e=>z.config.url=e),placeholder:"https://hooks.example.com/webhook"},null,8,["modelValue"])]),_:1}),i(ee,{label:"请求方法"},{default:p(()=>[i(ce,{modelValue:z.config.method,"onUpdate:modelValue":d[12]||(d[12]=e=>z.config.method=e)},{default:p(()=>[i(pe,{value:"POST"},{default:p(()=>[...d[124]||(d[124]=[g("POST",-1)])]),_:1}),i(pe,{value:"GET"},{default:p(()=>[...d[125]||(d[125]=[g("GET",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),i(ee,{label:"签名方式"},{default:p(()=>[i(ce,{modelValue:z.config.signType,"onUpdate:modelValue":d[13]||(d[13]=e=>z.config.signType=e)},{default:p(()=>[i(pe,{value:"none"},{default:p(()=>[...d[126]||(d[126]=[g("无签名",-1)])]),_:1}),i(pe,{value:"hmac_sha256"},{default:p(()=>[...d[127]||(d[127]=[g("HMAC-SHA256",-1)])]),_:1}),i(pe,{value:"token"},{default:p(()=>[...d[128]||(d[128]=[g("Token令牌",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),"hmac_sha256"===z.config.signType?(m(),u(h,{key:0},[i(ee,{label:"签名密钥",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signSecret,"onUpdate:modelValue":d[14]||(d[14]=e=>z.config.signSecret=e),type:"password","show-password":"",placeholder:"HMAC-SHA256 Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名Header"},{default:p(()=>[i(Z,{modelValue:z.config.signHeader,"onUpdate:modelValue":d[15]||(d[15]=e=>z.config.signHeader=e),placeholder:"X-Signature-256"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"token"===z.config.signType?(m(),u(h,{key:1},[i(ee,{label:"Token值",required:""},{default:p(()=>[i(Z,{modelValue:z.config.tokenValue,"onUpdate:modelValue":d[16]||(d[16]=e=>z.config.tokenValue=e),type:"password","show-password":"",placeholder:"Bearer Token 或自定义令牌"},null,8,["modelValue"])]),_:1}),i(ee,{label:"Token位置"},{default:p(()=>[i(ce,{modelValue:z.config.tokenPosition,"onUpdate:modelValue":d[17]||(d[17]=e=>z.config.tokenPosition=e)},{default:p(()=>[i(pe,{value:"header"},{default:p(()=>[...d[129]||(d[129]=[g("请求头",-1)])]),_:1}),i(pe,{value:"query"},{default:p(()=>[...d[130]||(d[130]=[g("URL参数",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),"header"===z.config.tokenPosition?(m(),f(ee,{key:0,label:"Header名称"},{default:p(()=>[i(Z,{modelValue:z.config.tokenHeader,"onUpdate:modelValue":d[18]||(d[18]=e=>z.config.tokenHeader=e),placeholder:"Authorization"},null,8,["modelValue"])]),_:1})):y("",!0)],64)):y("",!0),i(ne,{"content-position":"left"},{default:p(()=>[...d[131]||(d[131]=[g("请求体模板（可选）",-1)])]),_:1}),i(ee,{label:"请求体"},{default:p(()=>[i(Z,{modelValue:z.config.bodyTemplate,"onUpdate:modelValue":d[19]||(d[19]=e=>z.config.bodyTemplate=e),type:"textarea",rows:3,placeholder:"留空使用默认JSON格式，可用变量: {{message}}, {{time}}"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_https"===z.channelType?(m(),u(h,{key:2},[i(ne,{"content-position":"left"},{default:p(()=>[...d[132]||(d[132]=[g("请求配置",-1)])]),_:1}),i(ee,{label:"请求地址"},{default:p(()=>[i(Z,{modelValue:z.config.url,"onUpdate:modelValue":d[20]||(d[20]=e=>z.config.url=e),placeholder:"https://api.example.com/sms/send"},null,8,["modelValue"])]),_:1}),i(ie,{gutter:16},{default:p(()=>[i(te,{span:8},{default:p(()=>[i(ee,{label:"请求方法"},{default:p(()=>[i(oe,{modelValue:z.config.method,"onUpdate:modelValue":d[21]||(d[21]=e=>z.config.method=e),style:{width:"100%"}},{default:p(()=>[i(le,{label:"POST",value:"POST"}),i(le,{label:"GET",value:"GET"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),i(te,{span:16},{default:p(()=>[i(ee,{label:"Content-Type"},{default:p(()=>[i(oe,{modelValue:z.config.contentType,"onUpdate:modelValue":d[22]||(d[22]=e=>z.config.contentType=e),style:{width:"100%"}},{default:p(()=>[i(le,{label:"application/json",value:"application/json"}),i(le,{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),i(ne,{"content-position":"left"},{default:p(()=>[...d[133]||(d[133]=[g("请求头",-1)])]),_:1}),(m(!0),u(h,null,b(z.config.headers,(l,a)=>(m(),u("div",{key:a,class:"header-row"},[i(Z,{modelValue:l.key,"onUpdate:modelValue":e=>l.key=e,placeholder:"Header名",style:{width:"140px"}},null,8,["modelValue","onUpdate:modelValue"]),i(Z,{modelValue:l.value,"onUpdate:modelValue":e=>l.value=e,placeholder:"Header值",style:{flex:"1",margin:"0 8px"}},null,8,["modelValue","onUpdate:modelValue"]),i(t,{type:"danger",icon:v(e),circle:"",size:"small",onClick:e=>(e=>{z.config.headers.splice(e,1)})(a)},null,8,["icon","onClick"])]))),128)),i(t,{type:"primary",link:"",size:"small",onClick:j,style:{"margin-top":"8px"}},{default:p(()=>[...d[134]||(d[134]=[g("+ 添加请求头",-1)])]),_:1}),i(ne,{"content-position":"left"},{default:p(()=>[...d[135]||(d[135]=[g("请求体模板",-1)])]),_:1}),i(ee,{label:"请求体"},{default:p(()=>[i(Z,{modelValue:z.config.bodyTemplate,"onUpdate:modelValue":d[23]||(d[23]=e=>z.config.bodyTemplate=e),type:"textarea",rows:4,placeholder:'{"phone": "{{phone}}", "content": "{{message}}"}'},null,8,["modelValue"])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{default:p(()=>[d[136]||(d[136]=g(" 可用变量：",-1)),_("code",null,V(o.phone),1),d[137]||(d[137]=g(" 手机号, ",-1)),_("code",null,V(o.message),1),d[138]||(d[138]=g(" 消息内容, ",-1)),_("code",null,V(o.time),1),d[139]||(d[139]=g(" 时间 ",-1))]),_:1}),i(ee,{label:"接收手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[24]||(d[24]=e=>z.config.phones=e),placeholder:"多个手机号用逗号分隔（同时用于测试发送）"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_aliyun"===z.channelType?(m(),u(h,{key:3},[i(ne,{"content-position":"left"},{default:p(()=>[...d[140]||(d[140]=[g("阿里云短信配置",-1)])]),_:1}),i(ee,{label:"AccessKeyID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.accessKeyId,"onUpdate:modelValue":d[25]||(d[25]=e=>z.config.accessKeyId=e),placeholder:"阿里云 AccessKey ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AccessKeySecret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.accessKeySecret,"onUpdate:modelValue":d[26]||(d[26]=e=>z.config.accessKeySecret=e),type:"password","show-password":"",placeholder:"阿里云 AccessKey Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"短信签名",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[27]||(d[27]=e=>z.config.signName=e),placeholder:"如：阿里云"},null,8,["modelValue"])]),_:1}),i(ne,{"content-position":"left"},{default:p(()=>[...d[141]||(d[141]=[g("模板编码配置",-1)])]),_:1}),i(ee,{label:"默认模板",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateCode,"onUpdate:modelValue":d[28]||(d[28]=e=>z.config.templateCode=e),placeholder:"默认模板编码（兜底）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"验证码模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.verify_code,"onUpdate:modelValue":d[29]||(d[29]=e=>z.config.templateCodeMap.verify_code=e),placeholder:"验证码场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"密码重置模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.password_reset,"onUpdate:modelValue":d[30]||(d[30]=e=>z.config.templateCodeMap.password_reset=e),placeholder:"密码重置场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"安全告警模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.security_alert,"onUpdate:modelValue":d[31]||(d[31]=e=>z.config.templateCodeMap.security_alert=e),placeholder:"安全告警场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"12px"}},{default:p(()=>[...d[142]||(d[142]=[g("不同场景可使用不同的短信模板。未配置的场景将使用默认模板。",-1)])]),_:1}),i(ee,{label:"Region"},{default:p(()=>[i(Z,{modelValue:z.config.regionId,"onUpdate:modelValue":d[32]||(d[32]=e=>z.config.regionId=e),placeholder:"cn-hangzhou（默认）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[33]||(d[33]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_tencent"===z.channelType?(m(),u(h,{key:4},[i(ne,{"content-position":"left"},{default:p(()=>[...d[143]||(d[143]=[g("腾讯云短信配置",-1)])]),_:1}),i(ee,{label:"SecretId",required:""},{default:p(()=>[i(Z,{modelValue:z.config.secretId,"onUpdate:modelValue":d[34]||(d[34]=e=>z.config.secretId=e),placeholder:"腾讯云 SecretId"},null,8,["modelValue"])]),_:1}),i(ee,{label:"SecretKey",required:""},{default:p(()=>[i(Z,{modelValue:z.config.secretKey,"onUpdate:modelValue":d[35]||(d[35]=e=>z.config.secretKey=e),type:"password","show-password":"",placeholder:"腾讯云 SecretKey"},null,8,["modelValue"])]),_:1}),i(ee,{label:"SdkAppId",required:""},{default:p(()=>[i(Z,{modelValue:z.config.sdkAppId,"onUpdate:modelValue":d[36]||(d[36]=e=>z.config.sdkAppId=e),placeholder:"短信应用ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"短信签名",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[37]||(d[37]=e=>z.config.signName=e),placeholder:"如：腾讯科技"},null,8,["modelValue"])]),_:1}),i(ne,{"content-position":"left"},{default:p(()=>[...d[144]||(d[144]=[g("模板ID配置",-1)])]),_:1}),i(ee,{label:"默认模板",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateId,"onUpdate:modelValue":d[38]||(d[38]=e=>z.config.templateId=e),placeholder:"默认模板ID（兜底）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"验证码模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateIdMap.verify_code,"onUpdate:modelValue":d[39]||(d[39]=e=>z.config.templateIdMap.verify_code=e),placeholder:"验证码场景模板ID（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"密码重置模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateIdMap.password_reset,"onUpdate:modelValue":d[40]||(d[40]=e=>z.config.templateIdMap.password_reset=e),placeholder:"密码重置场景模板ID（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"安全告警模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateIdMap.security_alert,"onUpdate:modelValue":d[41]||(d[41]=e=>z.config.templateIdMap.security_alert=e),placeholder:"安全告警场景模板ID（可选）"},null,8,["modelValue"])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"12px"}},{default:p(()=>[...d[145]||(d[145]=[g("不同场景可使用不同的短信模板。未配置的场景将使用默认模板。",-1)])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[42]||(d[42]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_huawei"===z.channelType?(m(),u(h,{key:5},[i(ne,{"content-position":"left"},{default:p(()=>[...d[146]||(d[146]=[g("华为云短信配置",-1)])]),_:1}),i(ee,{label:"AppKey",required:""},{default:p(()=>[i(Z,{modelValue:z.config.appKey,"onUpdate:modelValue":d[43]||(d[43]=e=>z.config.appKey=e),placeholder:"华为云短信 App Key"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AppSecret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.appSecret,"onUpdate:modelValue":d[44]||(d[44]=e=>z.config.appSecret=e),type:"password","show-password":"",placeholder:"华为云短信 App Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"通道号",required:""},{default:p(()=>[i(Z,{modelValue:z.config.channel,"onUpdate:modelValue":d[45]||(d[45]=e=>z.config.channel=e),placeholder:"短信签名通道号"},null,8,["modelValue"])]),_:1}),i(ee,{label:"模板ID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateId,"onUpdate:modelValue":d[46]||(d[46]=e=>z.config.templateId=e),placeholder:"短信模板ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名名称"},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[47]||(d[47]=e=>z.config.signName=e),placeholder:"短信签名（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API端点"},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[48]||(d[48]=e=>z.config.endpoint=e),placeholder:"默认: cn-north-4"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[49]||(d[49]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_baidu"===z.channelType?(m(),u(h,{key:6},[i(ne,{"content-position":"left"},{default:p(()=>[...d[147]||(d[147]=[g("百度云短信配置",-1)])]),_:1}),i(ee,{label:"AccessKeyID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.accessKeyId,"onUpdate:modelValue":d[50]||(d[50]=e=>z.config.accessKeyId=e),placeholder:"百度云 AK"},null,8,["modelValue"])]),_:1}),i(ee,{label:"SecretAccessKey",required:""},{default:p(()=>[i(Z,{modelValue:z.config.accessKeySecret,"onUpdate:modelValue":d[51]||(d[51]=e=>z.config.accessKeySecret=e),type:"password","show-password":"",placeholder:"百度云 SK"},null,8,["modelValue"])]),_:1}),i(ee,{label:"InvokeId",required:""},{default:p(()=>[i(Z,{modelValue:z.config.invokeId,"onUpdate:modelValue":d[52]||(d[52]=e=>z.config.invokeId=e),placeholder:"业务ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名ID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[53]||(d[53]=e=>z.config.signName=e),placeholder:"签名ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"模板编码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateCode,"onUpdate:modelValue":d[54]||(d[54]=e=>z.config.templateCode=e),placeholder:"模板编码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API端点"},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[55]||(d[55]=e=>z.config.endpoint=e),placeholder:"默认: smsv3.bj.baidubce.com"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[56]||(d[56]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_ctyun"===z.channelType?(m(),u(h,{key:7},[i(ne,{"content-position":"left"},{default:p(()=>[...d[148]||(d[148]=[g("天翼云短信配置",-1)])]),_:1}),i(ee,{label:"AppID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.appId,"onUpdate:modelValue":d[57]||(d[57]=e=>z.config.appId=e),placeholder:"天翼云 App ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AppSecret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.appSecret,"onUpdate:modelValue":d[58]||(d[58]=e=>z.config.appSecret=e),type:"password","show-password":"",placeholder:"天翼云 App Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名名称",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[59]||(d[59]=e=>z.config.signName=e),placeholder:"短信签名"},null,8,["modelValue"])]),_:1}),i(ee,{label:"模板编码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateCode,"onUpdate:modelValue":d[60]||(d[60]=e=>z.config.templateCode=e),placeholder:"模板编码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API端点"},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[61]||(d[61]=e=>z.config.endpoint=e),placeholder:"默认: sms-global.ctapi.ctyun.cn"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[62]||(d[62]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_ronghe"===z.channelType?(m(),u(h,{key:8},[i(ne,{"content-position":"left"},{default:p(()=>[...d[149]||(d[149]=[g("融合云信配置",-1)])]),_:1}),i(ee,{label:"账号",required:""},{default:p(()=>[i(Z,{modelValue:z.config.account,"onUpdate:modelValue":d[63]||(d[63]=e=>z.config.account=e),placeholder:"平台账号"},null,8,["modelValue"])]),_:1}),i(ee,{label:"密码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.password,"onUpdate:modelValue":d[64]||(d[64]=e=>z.config.password=e),type:"password","show-password":"",placeholder:"平台密码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名名称"},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[65]||(d[65]=e=>z.config.signName=e),placeholder:"短信签名（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API端点"},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[66]||(d[66]=e=>z.config.endpoint=e),placeholder:"默认: api.mix2.zthysms.com"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[67]||(d[67]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_chuanglan"===z.channelType?(m(),u(h,{key:9},[i(ne,{"content-position":"left"},{default:p(()=>[...d[150]||(d[150]=[g("创蓝短信配置",-1)])]),_:1}),i(ee,{label:"API账号",required:""},{default:p(()=>[i(Z,{modelValue:z.config.account,"onUpdate:modelValue":d[68]||(d[68]=e=>z.config.account=e),placeholder:"创蓝 API 账号"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API密码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.password,"onUpdate:modelValue":d[69]||(d[69]=e=>z.config.password=e),type:"password","show-password":"",placeholder:"创蓝 API 密码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"短信签名",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[70]||(d[70]=e=>z.config.signName=e),placeholder:"已审核通过的短信签名"},null,8,["modelValue"])]),_:1}),i(ne,{"content-position":"left"},{default:p(()=>[...d[151]||(d[151]=[g("模板编码配置",-1)])]),_:1}),i(ee,{label:"默认模板",required:""},{default:p(()=>[i(Z,{modelValue:z.config.templateCode,"onUpdate:modelValue":d[71]||(d[71]=e=>z.config.templateCode=e),placeholder:"默认模板编码（兜底）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"验证码模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.verify_code,"onUpdate:modelValue":d[72]||(d[72]=e=>z.config.templateCodeMap.verify_code=e),placeholder:"验证码场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"密码重置模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.password_reset,"onUpdate:modelValue":d[73]||(d[73]=e=>z.config.templateCodeMap.password_reset=e),placeholder:"密码重置场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"安全告警模板"},{default:p(()=>[i(Z,{modelValue:z.config.templateCodeMap.security_alert,"onUpdate:modelValue":d[74]||(d[74]=e=>z.config.templateCodeMap.security_alert=e),placeholder:"安全告警场景模板编码（可选）"},null,8,["modelValue"])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"12px"}},{default:p(()=>[...d[152]||(d[152]=[g("不同场景可使用不同的短信模板。未配置的场景将使用默认模板。",-1)])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[75]||(d[75]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_yunpian"===z.channelType?(m(),u(h,{key:10},[i(ne,{"content-position":"left"},{default:p(()=>[...d[153]||(d[153]=[g("云片短信配置",-1)])]),_:1}),i(ee,{label:"APIKEY",required:""},{default:p(()=>[i(Z,{modelValue:z.config.apikey,"onUpdate:modelValue":d[76]||(d[76]=e=>z.config.apikey=e),placeholder:"云片 APIKEY"},null,8,["modelValue"])]),_:1}),i(ee,{label:"短信签名",required:""},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[77]||(d[77]=e=>z.config.signName=e),placeholder:"已审核通过的签名（不含【】）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"扩展号"},{default:p(()=>[i(Z,{modelValue:z.config.extend,"onUpdate:modelValue":d[78]||(d[78]=e=>z.config.extend=e),placeholder:"下发号码扩展号（纯数字）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"业务ID"},{default:p(()=>[i(Z,{modelValue:z.config.uid,"onUpdate:modelValue":d[79]||(d[79]=e=>z.config.uid=e),placeholder:"业务系统内的ID，如订单号"},null,8,["modelValue"])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"12px"}},{default:p(()=>[...d[154]||(d[154]=[g("短信内容会自动添加签名格式【签名名称】",-1)])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[80]||(d[80]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_cmcc_5g"===z.channelType?(m(),u(h,{key:11},[i(ne,{"content-position":"left"},{default:p(()=>[...d[155]||(d[155]=[g("移动5G消息配置",-1)])]),_:1}),i(ee,{label:"服务器地址",required:""},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[81]||(d[81]=e=>z.config.endpoint=e),placeholder:"CSP平台地址，如: https://xxx.chinamobile.com/openapi"},null,8,["modelValue"]),d[156]||(d[156]=_("div",{class:"field-hint"},"CSP北向接口的 serverRoot 地址",-1))]),_:1}),i(ee,{label:"Chatbot URI",required:""},{default:p(()=>[i(Z,{modelValue:z.config.chatbotUri,"onUpdate:modelValue":d[82]||(d[82]=e=>z.config.chatbotUri=e),placeholder:"如: sip:10086@botplatform.rcs.chinamobile.com"},null,8,["modelValue"]),d[157]||(d[157]=_("div",{class:"field-hint"},"Chatbot 的 SIP URI",-1))]),_:1}),i(ee,{label:"AppID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.appId,"onUpdate:modelValue":d[83]||(d[83]=e=>z.config.appId=e),placeholder:"开发者账号"},null,8,["modelValue"])]),_:1}),i(ee,{label:"开发者密码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.cmcc5gPassword,"onUpdate:modelValue":d[84]||(d[84]=e=>z.config.cmcc5gPassword=e),type:"password","show-password":"",placeholder:"开发者密码"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[85]||(d[85]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_cmcc"===z.channelType?(m(),u(h,{key:12},[i(ne,{"content-position":"left"},{default:p(()=>[...d[158]||(d[158]=[g("移动云MAS配置",-1)])]),_:1}),i(ee,{label:"企业代码",required:""},{default:p(()=>[i(Z,{modelValue:z.config.ecId,"onUpdate:modelValue":d[86]||(d[86]=e=>z.config.ecId=e),placeholder:"企业代码（ECID）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API Key",required:""},{default:p(()=>[i(Z,{modelValue:z.config.apiKey,"onUpdate:modelValue":d[87]||(d[87]=e=>z.config.apiKey=e),placeholder:"API Key"},null,8,["modelValue"])]),_:1}),i(ee,{label:"SecretKey",required:""},{default:p(()=>[i(Z,{modelValue:z.config.secretKeyM,"onUpdate:modelValue":d[88]||(d[88]=e=>z.config.secretKeyM=e),type:"password","show-password":"",placeholder:"Secret Key"},null,8,["modelValue"])]),_:1}),i(ee,{label:"签名名称"},{default:p(()=>[i(Z,{modelValue:z.config.signName,"onUpdate:modelValue":d[89]||(d[89]=e=>z.config.signName=e),placeholder:"短信签名"},null,8,["modelValue"])]),_:1}),i(ee,{label:"模板ID"},{default:p(()=>[i(Z,{modelValue:z.config.templateId,"onUpdate:modelValue":d[90]||(d[90]=e=>z.config.templateId=e),placeholder:"模板ID（可选）"},null,8,["modelValue"])]),_:1}),i(ee,{label:"API端点"},{default:p(()=>[i(Z,{modelValue:z.config.endpoint,"onUpdate:modelValue":d[91]||(d[91]=e=>z.config.endpoint=e),placeholder:"默认: mas.10086.cn"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试手机号"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[92]||(d[92]=e=>z.config.phones=e),placeholder:"用于测试发送的手机号"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_wecom"===z.channelType?(m(),u(h,{key:13},[i(ne,{"content-position":"left"},{default:p(()=>[...d[159]||(d[159]=[g("企业微信配置",-1)])]),_:1}),i(ee,{label:"CorpID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.corpId,"onUpdate:modelValue":d[93]||(d[93]=e=>z.config.corpId=e),placeholder:"企业微信 Corp ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"CorpSecret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.corpSecret,"onUpdate:modelValue":d[94]||(d[94]=e=>z.config.corpSecret=e),type:"password","show-password":"",placeholder:"应用 Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AgentID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.agentId,"onUpdate:modelValue":d[95]||(d[95]=e=>z.config.agentId=e),placeholder:"应用 Agent ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试用户"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[96]||(d[96]=e=>z.config.phones=e),placeholder:"企业微信用户ID（用于测试）"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_dingtalk"===z.channelType?(m(),u(h,{key:14},[i(ne,{"content-position":"left"},{default:p(()=>[...d[160]||(d[160]=[g("钉钉配置",-1)])]),_:1}),i(ee,{label:"AppKey",required:""},{default:p(()=>[i(Z,{modelValue:z.config.dingAppKey,"onUpdate:modelValue":d[97]||(d[97]=e=>z.config.dingAppKey=e),placeholder:"钉钉应用 AppKey"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AppSecret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.dingAppSecret,"onUpdate:modelValue":d[98]||(d[98]=e=>z.config.dingAppSecret=e),type:"password","show-password":"",placeholder:"钉钉应用 AppSecret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"AgentID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.dingAgentId,"onUpdate:modelValue":d[99]||(d[99]=e=>z.config.dingAgentId=e),placeholder:"钉钉应用 Agent ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试用户"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[100]||(d[100]=e=>z.config.phones=e),placeholder:"钉钉用户ID（用于测试）"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"sms_feishu"===z.channelType?(m(),u(h,{key:15},[i(ne,{"content-position":"left"},{default:p(()=>[...d[161]||(d[161]=[g("飞书配置",-1)])]),_:1}),i(ee,{label:"App ID",required:""},{default:p(()=>[i(Z,{modelValue:z.config.feishuAppId,"onUpdate:modelValue":d[101]||(d[101]=e=>z.config.feishuAppId=e),placeholder:"飞书应用 App ID"},null,8,["modelValue"])]),_:1}),i(ee,{label:"App Secret",required:""},{default:p(()=>[i(Z,{modelValue:z.config.feishuAppSecret,"onUpdate:modelValue":d[102]||(d[102]=e=>z.config.feishuAppSecret=e),type:"password","show-password":"",placeholder:"飞书应用 App Secret"},null,8,["modelValue"])]),_:1}),i(ee,{label:"测试用户"},{default:p(()=>[i(Z,{modelValue:z.config.phones,"onUpdate:modelValue":d[103]||(d[103]=e=>z.config.phones=e),placeholder:"飞书用户 open_id（用于测试）"},null,8,["modelValue"])]),_:1})],64)):y("",!0),"dingtalk_work"===z.channelType?(m(),u(h,{key:16},[i(ne,{"content-position":"left"},{default:p(()=>[...d[162]||(d[162]=[g("钉钉工作消息配置",-1)])]),_:1}),i(se,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{default:p(()=>[...d[163]||(d[163]=[g(" 钉钉工作消息将复用系统已配置的钉钉应用参数（AppKey、AppSecret、AgentID），无需额外配置凭证。 请在「数据源 - 钉钉配置」页面确认钉钉应用信息已正确填写。 ",-1)])]),_:1}),i(ee,{label:"测试用户ID"},{default:p(()=>[i(Z,{modelValue:z.config.testUserID,"onUpdate:modelValue":d[104]||(d[104]=e=>z.config.testUserID=e),placeholder:"钉钉用户ID（用于默认测试发送，可选）"},null,8,["modelValue"])]),_:1}),i(se,{type:"warning",closable:!1,style:{"margin-bottom":"16px"}},{default:p(()=>[...d[164]||(d[164]=[g(" 测试用户ID为钉钉的 ",-1),_("code",null,"userid",-1),g("，可在钉钉管理后台查看。留空将尝试使用管理员的钉钉ID。 ",-1)])]),_:1})],64)):y("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),i(re,{modelValue:W.value,"onUpdate:modelValue":d[113]||(d[113]=e=>W.value=e),title:"测试消息发送",width:"560px","destroy-on-close":""},{footer:p(()=>[i(t,{onClick:d[112]||(d[112]=e=>W.value=!1)},{default:p(()=>[...d[170]||(d[170]=[g("取消",-1)])]),_:1}),i(t,{type:"primary",onClick:J,loading:$.value},{default:p(()=>[...d[171]||(d[171]=[g("发送测试",-1)])]),_:1},8,["loading"])]),default:p(()=>[i(me,{model:Y,"label-width":"90px"},{default:p(()=>[i(ee,{label:"通道"},{default:p(()=>[i(U,null,{default:p(()=>{var e;return[g(V(null==(e=X.value)?void 0:e.name),1)]}),_:1}),i(U,{type:"info",style:{"margin-left":"8px"}},{default:p(()=>{var e;return[g(V(R((null==(e=X.value)?void 0:e.channelType)||"")),1)]}),_:1})]),_:1}),i(ee,{label:"收件人",required:""},{default:p(()=>{var e,l;return["dingtalk_work"===(null==(e=X.value)?void 0:e.channelType)?(m(),u(h,{key:0},[i(oe,{modelValue:Y.recipient,"onUpdate:modelValue":d[107]||(d[107]=e=>Y.recipient=e),filterable:"",placeholder:"选择或输入钉钉用户",style:{width:"100%"},"allow-create":"","default-first-option":""},{default:p(()=>[(m(!0),u(h,null,b(P.value,e=>(m(),f(le,{key:e.id,label:`${e.nickname||e.username} (${e.dingtalkUid||"未绑定"})`,value:e.dingtalkUid||"",disabled:!e.dingtalkUid},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]),d[167]||(d[167]=_("div",{class:"form-tip"},"选择已绑定钉钉的用户，或直接输入钉钉UserID",-1))],64)):"email"===(null==(l=X.value)?void 0:l.channelType)?(m(),u(h,{key:1},[i(Z,{modelValue:Y.recipient,"onUpdate:modelValue":d[108]||(d[108]=e=>Y.recipient=e),placeholder:"请输入邮箱地址",style:{width:"100%"}},null,8,["modelValue"]),d[168]||(d[168]=_("div",{class:"form-tip"},"请输入收件人邮箱地址",-1))],64)):(m(),u(h,{key:2},[i(oe,{modelValue:Y.recipient,"onUpdate:modelValue":d[109]||(d[109]=e=>Y.recipient=e),filterable:"",placeholder:"选择或输入手机号",style:{width:"100%"},"allow-create":"","default-first-option":""},{default:p(()=>[(m(!0),u(h,null,b(P.value,e=>(m(),f(le,{key:e.id,label:`${e.nickname||e.username} (${e.phone||"无手机号"})`,value:e.phone||"",disabled:!e.phone},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]),d[169]||(d[169]=_("div",{class:"form-tip"},"选择有手机号的用户，或直接输入手机号",-1))],64))]}),_:1}),i(ee,{label:"消息模板"},{default:p(()=>[i(oe,{modelValue:Y.templateId,"onUpdate:modelValue":d[110]||(d[110]=e=>Y.templateId=e),style:{width:"100%"},onChange:B},{default:p(()=>[i(le,{label:"自定义内容",value:0}),(m(!0),u(h,null,b(M.value,e=>(m(),f(le,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),i(ee,{label:"消息内容",required:""},{default:p(()=>[i(Z,{modelValue:Y.message,"onUpdate:modelValue":d[111]||(d[111]=e=>Y.message=e),type:"textarea",rows:4,placeholder:"请输入测试消息内容"},null,8,["modelValue"])]),_:1}),i(ee,{label:"预览"},{default:p(()=>[_("div",q,V(F.value),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-ea6e8eec"]]);export{C as default};
