const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/html2pdf-D8eP6TOD.js","assets/elementPlus-DW6qdM9Z.js","assets/vendor-DDTA3iPl.js"])))=>i.map(i=>d[i]);
import{n as t,_ as d}from"./index-D9Oaf6TO.js";import{L as e,H as a}from"./elementPlus-DW6qdM9Z.js";import{v as c,D as o,G as u,E as v,F as s,U as r,u as n,aA as l,r as q,ac as i,y as p,S as h}from"./vendor-DDTA3iPl.js";const g={class:"api-docs-page"},m={class:"docs-toolbar"},b={class:"doc-cover"},k={class:"doc-meta"},T=d(c({__name:"ApiDocs",setup(d){const c=q(),T=q(!1),I=(new Date).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}),y=async()=>{T.value=!0;try{const d=(await t(async()=>{const{default:t}=await import("./html2pdf-D8eP6TOD.js").then(t=>t.h);return{default:t}},__vite__mapDeps([0,1,2]))).default,e=c.value;if(!e)return;const a={margin:[10,15,10,15],filename:`API接口文档_${I}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["avoid-all","css","legacy"]}};await d().set(a).from(e).save()}catch(d){}finally{T.value=!1}};return(t,d)=>{const q=i("el-icon"),f=i("el-button");return p(),o("div",g,[u("div",m,[v(f,{onClick:d[0]||(d[0]=d=>t.$router.back())},{default:s(()=>[v(q,{style:{"margin-right":"4px"}},{default:s(()=>[v(n(e))]),_:1}),d[1]||(d[1]=h(" 返回 ",-1))]),_:1}),v(f,{type:"primary",onClick:y,loading:T.value},{default:s(()=>[v(q,{style:{"margin-right":"4px"}},{default:s(()=>[v(n(a))]),_:1}),d[2]||(d[2]=h(" 下载PDF文档 ",-1))]),_:1},8,["loading"])]),u("div",{class:"docs-content",ref_key:"docsRef",ref:c},[u("div",b,[d[4]||(d[4]=u("h1",null,"API 接口文档",-1)),d[5]||(d[5]=u("p",{class:"doc-subtitle"},"统一身份认证管理平台",-1)),u("div",k,[d[3]||(d[3]=u("p",null,"版本：v1.0",-1)),u("p",null,"生成日期："+r(n(I)),1)])]),d[6]||(d[6]=l('<div class="doc-section" data-v-7ce9ed84><h2 data-v-7ce9ed84>目录</h2><ul class="toc" data-v-7ce9ed84><li data-v-7ce9ed84><a href="#overview" data-v-7ce9ed84>1. 概述</a></li><li data-v-7ce9ed84><a href="#auth-api" data-v-7ce9ed84>2. 认证接口</a><ul data-v-7ce9ed84><li data-v-7ce9ed84><a href="#api-login" data-v-7ce9ed84>2.1 用户登录</a></li></ul></li><li data-v-7ce9ed84><a href="#user-api" data-v-7ce9ed84>3. 用户管理接口</a><ul data-v-7ce9ed84><li data-v-7ce9ed84><a href="#api-user-list" data-v-7ce9ed84>3.1 获取用户列表</a></li><li data-v-7ce9ed84><a href="#api-user-create" data-v-7ce9ed84>3.2 新增用户</a></li><li data-v-7ce9ed84><a href="#api-user-get" data-v-7ce9ed84>3.3 获取用户详情</a></li><li data-v-7ce9ed84><a href="#api-user-update" data-v-7ce9ed84>3.4 更新用户信息</a></li><li data-v-7ce9ed84><a href="#api-user-delete" data-v-7ce9ed84>3.5 删除用户</a></li><li data-v-7ce9ed84><a href="#api-user-status" data-v-7ce9ed84>3.6 启用/禁用用户</a></li><li data-v-7ce9ed84><a href="#api-user-reset-pwd" data-v-7ce9ed84>3.7 重置用户密码</a></li><li data-v-7ce9ed84><a href="#api-user-change-pwd" data-v-7ce9ed84>3.8 修改密码（当前用户）</a></li><li data-v-7ce9ed84><a href="#api-user-export" data-v-7ce9ed84>3.9 导出所有用户（含加密密码）</a></li></ul></li><li data-v-7ce9ed84><a href="#role-api" data-v-7ce9ed84>4. 角色管理接口</a><ul data-v-7ce9ed84><li data-v-7ce9ed84><a href="#api-role-list" data-v-7ce9ed84>4.1 获取角色列表</a></li><li data-v-7ce9ed84><a href="#api-role-create" data-v-7ce9ed84>4.2 新增角色</a></li><li data-v-7ce9ed84><a href="#api-role-delete" data-v-7ce9ed84>4.3 删除角色</a></li><li data-v-7ce9ed84><a href="#api-role-auto-assign-get" data-v-7ce9ed84>4.4 获取自动分配规则</a></li><li data-v-7ce9ed84><a href="#api-role-auto-assign-update" data-v-7ce9ed84>4.5 更新自动分配规则</a></li><li data-v-7ce9ed84><a href="#api-role-auto-assign-apply" data-v-7ce9ed84>4.6 立即执行自动分配</a></li></ul></li><li data-v-7ce9ed84><a href="#log-api" data-v-7ce9ed84>5. 日志管理接口</a><ul data-v-7ce9ed84><li data-v-7ce9ed84><a href="#api-log-login" data-v-7ce9ed84>5.1 查询登录日志</a></li><li data-v-7ce9ed84><a href="#api-log-operation" data-v-7ce9ed84>5.2 查询操作日志</a></li></ul></li><li data-v-7ce9ed84><a href="#error-codes" data-v-7ce9ed84>6. 错误码说明</a></li></ul></div><div class="doc-section" id="overview" data-v-7ce9ed84><h2 data-v-7ce9ed84>1. 概述</h2><h3 data-v-7ce9ed84>基础信息</h3><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><td class="label-col" data-v-7ce9ed84>Base URL</td><td data-v-7ce9ed84><code data-v-7ce9ed84>http://&lt;服务器地址&gt;:&lt;端口&gt;/api</code></td></tr><tr data-v-7ce9ed84><td class="label-col" data-v-7ce9ed84>协议</td><td data-v-7ce9ed84>HTTP / HTTPS</td></tr><tr data-v-7ce9ed84><td class="label-col" data-v-7ce9ed84>数据格式</td><td data-v-7ce9ed84>JSON</td></tr><tr data-v-7ce9ed84><td class="label-col" data-v-7ce9ed84>字符编码</td><td data-v-7ce9ed84>UTF-8</td></tr><tr data-v-7ce9ed84><td class="label-col" data-v-7ce9ed84>认证方式</td><td data-v-7ce9ed84>Bearer Token（JWT）</td></tr></table><h3 data-v-7ce9ed84>认证说明</h3><p data-v-7ce9ed84>除登录接口外，所有接口均需在请求头中携带 Token：</p><pre class="code-block" data-v-7ce9ed84>Authorization: Bearer &lt;token&gt;</pre><p data-v-7ce9ed84>Token 通过登录接口获取，有效期由系统管理员配置。</p><h3 data-v-7ce9ed84>通用响应格式</h3><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: { ... },\n  &quot;message&quot;: &quot;操作成功&quot;\n}</pre><p data-v-7ce9ed84>请求失败时：</p><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: false,\n  &quot;message&quot;: &quot;错误原因描述&quot;\n}</pre><h3 data-v-7ce9ed84>IP 白名单</h3><p data-v-7ce9ed84>系统支持 API IP 白名单功能。当白名单为空时不做限制；当白名单有条目时，仅白名单内 IP 可访问 API。</p><h3 data-v-7ce9ed84>频率限制</h3><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>限制</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>通用 API</td><td data-v-7ce9ed84>100 次/分钟/IP</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>登录接口</td><td data-v-7ce9ed84>10 次/分钟/IP</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>敏感操作</td><td data-v-7ce9ed84>5 次/分钟/IP</td></tr></table></div><div class="doc-section" id="auth-api" data-v-7ce9ed84><h2 data-v-7ce9ed84>2. 认证接口</h2><div class="api-item" id="api-login" data-v-7ce9ed84><h3 data-v-7ce9ed84>2.1 用户登录</h3><div class="api-method" data-v-7ce9ed84><span class="method post" data-v-7ce9ed84>POST</span> <code data-v-7ce9ed84>/api/auth/login</code></div><p class="api-desc" data-v-7ce9ed84>用户登录并获取访问令牌。密码需在客户端进行 SHA-256 哈希后传输。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong>无（公开接口）</p><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>username</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>用户名</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>password</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>密码（SHA-256 哈希值）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>_encrypted</td><td data-v-7ce9ed84>boolean</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>标记密码已哈希，传 true</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X POST http://localhost:8080/api/auth/login \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;username&quot;: &quot;admin&quot;,\n    &quot;password&quot;: &quot;e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855&quot;,\n    &quot;_encrypted&quot;: true\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;token&quot;: &quot;eyJhbGciOiJIUzI1NiIs...&quot;,\n    &quot;user&quot;: {\n      &quot;id&quot;: 1,\n      &quot;username&quot;: &quot;admin&quot;,\n      &quot;nickname&quot;: &quot;管理员&quot;,\n      &quot;roles&quot;: [{ &quot;id&quot;: 1, &quot;name&quot;: &quot;超级管理员&quot;, &quot;code&quot;: &quot;super_admin&quot; }]\n    }\n  }\n}</pre><h4 data-v-7ce9ed84>错误响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: false,\n  &quot;message&quot;: &quot;用户名或密码错误&quot;\n}</pre></div></div><div class="doc-section" id="user-api" data-v-7ce9ed84><h2 data-v-7ce9ed84>3. 用户管理接口</h2><div class="api-item" id="api-user-list" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.1 获取用户列表</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/users</code></div><p class="api-desc" data-v-7ce9ed84>分页获取用户列表，支持关键词搜索和分组筛选。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:list</code></p><h4 data-v-7ce9ed84>请求参数（Query）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageIndex</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>页码，从 0 开始，默认 0</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageSize</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>每页数量，默认 20</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>keyword</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>搜索关键词（匹配用户名、昵称、手机号）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>groupId</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>用户组ID筛选</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET &quot;http://localhost:8080/api/users?pageIndex=0&amp;pageSize=10&amp;keyword=zhang&quot; \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;list&quot;: [\n      {\n        &quot;id&quot;: 2,\n        &quot;username&quot;: &quot;zhangsan&quot;,\n        &quot;nickname&quot;: &quot;张三&quot;,\n        &quot;phone&quot;: &quot;13800138000&quot;,\n        &quot;email&quot;: &quot;zhangsan@example.com&quot;,\n        &quot;status&quot;: 1,\n        &quot;source&quot;: &quot;local&quot;,\n        &quot;groupId&quot;: 1,\n        &quot;roles&quot;: [{ &quot;id&quot;: 2, &quot;name&quot;: &quot;普通用户&quot;, &quot;code&quot;: &quot;user&quot; }],\n        &quot;createdAt&quot;: &quot;2024-01-15T10:30:00Z&quot;,\n        &quot;updatedAt&quot;: &quot;2024-01-15T10:30:00Z&quot;\n      }\n    ],\n    &quot;total&quot;: 1\n  }\n}</pre></div><div class="api-item" id="api-user-create" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.2 新增用户</h3><div class="api-method" data-v-7ce9ed84><span class="method post" data-v-7ce9ed84>POST</span> <code data-v-7ce9ed84>/api/users</code></div><p class="api-desc" data-v-7ce9ed84>创建一个新的本地用户。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:create</code></p><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>username</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>用户名（唯一）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>password</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>密码（至少6位）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>nickname</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>昵称</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>phone</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>手机号</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>email</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>邮箱</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>status</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>状态：1=启用 0=禁用，默认1</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>roleIds</td><td data-v-7ce9ed84>int[]</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>角色ID数组</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>groupId</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>用户组ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X POST http://localhost:8080/api/users \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;username&quot;: &quot;lisi&quot;,\n    &quot;password&quot;: &quot;Abc123456&quot;,\n    &quot;nickname&quot;: &quot;李四&quot;,\n    &quot;phone&quot;: &quot;13900139000&quot;,\n    &quot;email&quot;: &quot;lisi@example.com&quot;,\n    &quot;status&quot;: 1,\n    &quot;roleIds&quot;: [2],\n    &quot;groupId&quot;: 1\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;id&quot;: 3,\n    &quot;username&quot;: &quot;lisi&quot;,\n    &quot;nickname&quot;: &quot;李四&quot;,\n    &quot;status&quot;: 1,\n    &quot;source&quot;: &quot;local&quot;\n  }\n}</pre></div><div class="api-item" id="api-user-get" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.3 获取用户详情</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/users/:id</code></div><p class="api-desc" data-v-7ce9ed84>根据用户ID获取单个用户的详细信息。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:list</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>用户ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET http://localhost:8080/api/users/2 \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;id&quot;: 2,\n    &quot;username&quot;: &quot;zhangsan&quot;,\n    &quot;nickname&quot;: &quot;张三&quot;,\n    &quot;phone&quot;: &quot;13800138000&quot;,\n    &quot;email&quot;: &quot;zhangsan@example.com&quot;,\n    &quot;status&quot;: 1,\n    &quot;source&quot;: &quot;local&quot;,\n    &quot;groupId&quot;: 1,\n    &quot;roles&quot;: [{ &quot;id&quot;: 2, &quot;name&quot;: &quot;普通用户&quot;, &quot;code&quot;: &quot;user&quot; }],\n    &quot;createdAt&quot;: &quot;2024-01-15T10:30:00Z&quot;\n  }\n}</pre></div><div class="api-item" id="api-user-update" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.4 更新用户信息</h3><div class="api-method" data-v-7ce9ed84><span class="method put" data-v-7ce9ed84>PUT</span> <code data-v-7ce9ed84>/api/users/:id</code></div><p class="api-desc" data-v-7ce9ed84>更新指定用户的信息和角色。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:update</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>用户ID</td></tr></table><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>nickname</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>昵称</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>phone</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>手机号</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>email</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>邮箱</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>status</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>状态：1=启用 0=禁用</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>roleIds</td><td data-v-7ce9ed84>int[]</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>角色ID数组（会覆盖现有角色）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>groupId</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>用户组ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X PUT http://localhost:8080/api/users/2 \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;nickname&quot;: &quot;张三（已更新）&quot;,\n    &quot;phone&quot;: &quot;13800138001&quot;,\n    &quot;roleIds&quot;: [2, 3]\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-user-delete" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.5 删除用户</h3><div class="api-method" data-v-7ce9ed84><span class="method delete" data-v-7ce9ed84>DELETE</span> <code data-v-7ce9ed84>/api/users/:id</code></div><p class="api-desc" data-v-7ce9ed84>软删除指定用户（标记为已删除，不会物理删除）。不能删除自己。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:delete</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>用户ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X DELETE http://localhost:8080/api/users/3 \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-user-status" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.6 启用/禁用用户</h3><div class="api-method" data-v-7ce9ed84><span class="method put" data-v-7ce9ed84>PUT</span> <code data-v-7ce9ed84>/api/users/:id/status</code></div><p class="api-desc" data-v-7ce9ed84>更新指定用户的启用/禁用状态。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:update</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>用户ID</td></tr></table><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>status</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>1=启用 0=禁用</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X PUT http://localhost:8080/api/users/2/status \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{ &quot;status&quot;: 0 }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-user-reset-pwd" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.7 重置用户密码</h3><div class="api-method" data-v-7ce9ed84><span class="method put" data-v-7ce9ed84>PUT</span> <code data-v-7ce9ed84>/api/users/:id/reset-password</code></div><p class="api-desc" data-v-7ce9ed84>管理员重置指定用户的密码。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>user:update</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>用户ID</td></tr></table><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>password</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>新密码（至少6位）</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X PUT http://localhost:8080/api/users/2/reset-password \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{ &quot;password&quot;: &quot;NewPassword123&quot; }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-user-change-pwd" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.8 修改密码（当前用户）</h3><div class="api-method" data-v-7ce9ed84><span class="method put" data-v-7ce9ed84>PUT</span> <code data-v-7ce9ed84>/api/auth/password</code></div><p class="api-desc" data-v-7ce9ed84>当前登录用户修改自己的密码。密码需要 SHA-256 哈希后传输。修改成功后所有会话将失效，需重新登录。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong>已登录即可</p><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>oldPassword</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>原密码（SHA-256 哈希值）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>newPassword</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>新密码（SHA-256 哈希值）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>_encrypted</td><td data-v-7ce9ed84>boolean</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>标记密码已哈希，传 true</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X PUT http://localhost:8080/api/auth/password \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;oldPassword&quot;: &quot;旧密码的SHA256哈希&quot;,\n    &quot;newPassword&quot;: &quot;新密码的SHA256哈希&quot;,\n    &quot;_encrypted&quot;: true\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;message&quot;: &quot;密码修改成功&quot;\n}</pre></div><div class="api-item" id="api-user-export" data-v-7ce9ed84><h3 data-v-7ce9ed84>3.9 导出所有用户（含加密密码）</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/users/export</code></div><p class="api-desc" data-v-7ce9ed84>导出所有用户的完整信息，包括 bcrypt 加密后的密码哈希和 Samba NT 密码哈希。此接口为敏感操作，调用会被记录到操作日志。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>settings:system</code>（仅管理员）</p><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET http://localhost:8080/api/users/export \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;list&quot;: [\n      {\n        &quot;id&quot;: 1,\n        &quot;username&quot;: &quot;admin&quot;,\n        &quot;nickname&quot;: &quot;管理员&quot;,\n        &quot;phone&quot;: &quot;&quot;,\n        &quot;email&quot;: &quot;admin@example.com&quot;,\n        &quot;status&quot;: 1,\n        &quot;source&quot;: &quot;local&quot;,\n        &quot;groupId&quot;: 0,\n        &quot;password&quot;: &quot;$2a$10$xxxx...（bcrypt哈希）&quot;,\n        &quot;sambaNTPassword&quot;: &quot;A4F49C40...&quot;,\n        &quot;createdAt&quot;: &quot;2024-01-01 00:00:00&quot;,\n        &quot;updatedAt&quot;: &quot;2024-06-15 12:00:00&quot;,\n        &quot;passwordChangedAt&quot;: &quot;2024-06-15 12:00:00&quot;,\n        &quot;roles&quot;: [\n          { &quot;id&quot;: 1, &quot;name&quot;: &quot;超级管理员&quot;, &quot;code&quot;: &quot;super_admin&quot; }\n        ]\n      }\n    ],\n    &quot;total&quot;: 15\n  }\n}</pre><div class="api-warning" data-v-7ce9ed84><strong data-v-7ce9ed84>安全警告：</strong>此接口返回用户的加密密码信息，属于高度敏感数据。请确保仅在安全的网络环境中调用，并妥善保管返回的数据。每次调用都会记录操作日志。 </div></div></div><div class="doc-section" id="role-api" data-v-7ce9ed84><h2 data-v-7ce9ed84>4. 角色管理接口</h2><div class="api-item" id="api-role-list" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.1 获取角色列表</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/roles</code></div><p class="api-desc" data-v-7ce9ed84>获取系统中所有角色的列表。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:list</code></p><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET http://localhost:8080/api/roles \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;name&quot;: &quot;超级管理员&quot;,\n      &quot;code&quot;: &quot;super_admin&quot;,\n      &quot;description&quot;: &quot;系统超级管理员&quot;,\n      &quot;status&quot;: 1,\n      &quot;createdAt&quot;: &quot;2024-01-01T00:00:00Z&quot;\n    },\n    {\n      &quot;id&quot;: 2,\n      &quot;name&quot;: &quot;普通用户&quot;,\n      &quot;code&quot;: &quot;user&quot;,\n      &quot;description&quot;: &quot;默认用户角色&quot;,\n      &quot;status&quot;: 1,\n      &quot;createdAt&quot;: &quot;2024-01-01T00:00:00Z&quot;\n    }\n  ]\n}</pre></div><div class="api-item" id="api-role-create" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.2 新增角色</h3><div class="api-method" data-v-7ce9ed84><span class="method post" data-v-7ce9ed84>POST</span> <code data-v-7ce9ed84>/api/roles</code></div><p class="api-desc" data-v-7ce9ed84>创建一个新的角色。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:create</code></p><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>name</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>角色名称</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>code</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>角色编码（唯一）</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>description</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>角色描述</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X POST http://localhost:8080/api/roles \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;name&quot;: &quot;部门经理&quot;,\n    &quot;code&quot;: &quot;dept_manager&quot;,\n    &quot;description&quot;: &quot;部门管理人员&quot;\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;id&quot;: 3,\n    &quot;name&quot;: &quot;部门经理&quot;,\n    &quot;code&quot;: &quot;dept_manager&quot;,\n    &quot;description&quot;: &quot;部门管理人员&quot;,\n    &quot;status&quot;: 1\n  }\n}</pre></div><div class="api-item" id="api-role-delete" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.3 删除角色</h3><div class="api-method" data-v-7ce9ed84><span class="method delete" data-v-7ce9ed84>DELETE</span> <code data-v-7ce9ed84>/api/roles/:id</code></div><p class="api-desc" data-v-7ce9ed84>删除指定角色。删除角色后，已分配该角色的用户会自动解除关联。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:delete</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>角色ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X DELETE http://localhost:8080/api/roles/3 \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-role-auto-assign-get" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.4 获取自动分配规则</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/roles/:id/auto-assign</code></div><p class="api-desc" data-v-7ce9ed84>获取指定角色的自动分配规则列表。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:list</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>角色ID</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET http://localhost:8080/api/roles/2/auto-assign \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;roleId&quot;: 2,\n      &quot;ruleType&quot;: &quot;group&quot;,\n      &quot;ruleValue&quot;: &quot;3&quot;,\n      &quot;createdAt&quot;: &quot;2024-01-15T10:00:00Z&quot;\n    }\n  ]\n}</pre></div><div class="api-item" id="api-role-auto-assign-update" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.5 更新自动分配规则</h3><div class="api-method" data-v-7ce9ed84><span class="method put" data-v-7ce9ed84>PUT</span> <code data-v-7ce9ed84>/api/roles/:id/auto-assign</code></div><p class="api-desc" data-v-7ce9ed84>更新指定角色的自动分配规则（会覆盖现有规则）。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:update</code></p><h4 data-v-7ce9ed84>路径参数</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>id</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>角色ID</td></tr></table><h4 data-v-7ce9ed84>请求参数（Body）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>rules</td><td data-v-7ce9ed84>array</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>规则列表</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>rules[].ruleType</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>规则类型：group / job_title</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>rules[].ruleValue</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>是</td><td data-v-7ce9ed84>规则值（分组ID 或 职位名称）</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X PUT http://localhost:8080/api/roles/2/auto-assign \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot; \\\n  -H &quot;Content-Type: application/json&quot; \\\n  -d &#39;{\n    &quot;rules&quot;: [\n      { &quot;ruleType&quot;: &quot;group&quot;, &quot;ruleValue&quot;: &quot;3&quot; },\n      { &quot;ruleType&quot;: &quot;job_title&quot;, &quot;ruleValue&quot;: &quot;工程师&quot; }\n    ]\n  }&#39;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: null\n}</pre></div><div class="api-item" id="api-role-auto-assign-apply" data-v-7ce9ed84><h3 data-v-7ce9ed84>4.6 立即执行自动分配</h3><div class="api-method" data-v-7ce9ed84><span class="method post" data-v-7ce9ed84>POST</span> <code data-v-7ce9ed84>/api/roles/auto-assign/apply</code></div><p class="api-desc" data-v-7ce9ed84>根据当前配置的所有角色自动分配规则，立即对现有用户执行角色分配。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>role:update</code></p><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X POST http://localhost:8080/api/roles/auto-assign/apply \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;totalRules&quot;: 3,\n    &quot;totalAssigned&quot;: 12,\n    &quot;details&quot;: [\n      { &quot;roleId&quot;: 2, &quot;roleName&quot;: &quot;普通用户&quot;, &quot;assigned&quot;: 8 },\n      { &quot;roleId&quot;: 3, &quot;roleName&quot;: &quot;部门经理&quot;, &quot;assigned&quot;: 4 }\n    ]\n  }\n}</pre></div></div><div class="doc-section" id="log-api" data-v-7ce9ed84><h2 data-v-7ce9ed84>5. 日志管理接口</h2><p data-v-7ce9ed84>日志接口均为只读（GET），不提供删除和修改日志的能力。</p><div class="api-item" id="api-log-login" data-v-7ce9ed84><h3 data-v-7ce9ed84>5.1 查询登录日志</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/logs/login</code></div><p class="api-desc" data-v-7ce9ed84>查询用户登录日志记录，支持分页和搜索。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>log:login</code></p><h4 data-v-7ce9ed84>请求参数（Query）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageIndex</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>页码，从 0 开始</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageSize</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>每页数量，默认 20</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>username</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>按用户名筛选</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET &quot;http://localhost:8080/api/logs/login?pageIndex=0&amp;pageSize=20&quot; \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;list&quot;: [\n      {\n        &quot;id&quot;: 100,\n        &quot;userId&quot;: 1,\n        &quot;username&quot;: &quot;admin&quot;,\n        &quot;ip&quot;: &quot;192.168.1.100&quot;,\n        &quot;userAgent&quot;: &quot;Mozilla/5.0 ...&quot;,\n        &quot;status&quot;: 1,\n        &quot;message&quot;: &quot;登录成功&quot;,\n        &quot;createdAt&quot;: &quot;2024-06-15T09:30:00Z&quot;\n      }\n    ],\n    &quot;total&quot;: 258\n  }\n}</pre><h4 data-v-7ce9ed84>字段说明</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>字段</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>status</td><td data-v-7ce9ed84>1=成功，0=失败</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>message</td><td data-v-7ce9ed84>登录结果描述（如&quot;登录成功&quot;、&quot;密码错误&quot;）</td></tr></table></div><div class="api-item" id="api-log-operation" data-v-7ce9ed84><h3 data-v-7ce9ed84>5.2 查询操作日志</h3><div class="api-method" data-v-7ce9ed84><span class="method get" data-v-7ce9ed84>GET</span> <code data-v-7ce9ed84>/api/logs/operation</code></div><p class="api-desc" data-v-7ce9ed84>查询系统操作日志记录（包含用户管理、角色管理、系统配置等操作的审计记录）。</p><p data-v-7ce9ed84><strong data-v-7ce9ed84>权限要求：</strong><code data-v-7ce9ed84>log:operation</code></p><h4 data-v-7ce9ed84>请求参数（Query）</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>参数</th><th data-v-7ce9ed84>类型</th><th data-v-7ce9ed84>必填</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageIndex</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>页码，从 0 开始</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>pageSize</td><td data-v-7ce9ed84>int</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>每页数量，默认 20</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>username</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>按操作人筛选</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>module</td><td data-v-7ce9ed84>string</td><td data-v-7ce9ed84>否</td><td data-v-7ce9ed84>按模块筛选</td></tr></table><h4 data-v-7ce9ed84>请求示例</h4><pre class="code-block" data-v-7ce9ed84>curl -X GET &quot;http://localhost:8080/api/logs/operation?pageIndex=0&amp;pageSize=20&amp;module=用户管理&quot; \\\n  -H &quot;Authorization: Bearer &lt;token&gt;&quot;</pre><h4 data-v-7ce9ed84>成功响应</h4><pre class="code-block" data-v-7ce9ed84>{\n  &quot;success&quot;: true,\n  &quot;data&quot;: {\n    &quot;list&quot;: [\n      {\n        &quot;id&quot;: 50,\n        &quot;userId&quot;: 1,\n        &quot;username&quot;: &quot;admin&quot;,\n        &quot;module&quot;: &quot;用户管理&quot;,\n        &quot;action&quot;: &quot;新增用户&quot;,\n        &quot;target&quot;: &quot;zhangsan&quot;,\n        &quot;content&quot;: &quot;&quot;,\n        &quot;ip&quot;: &quot;192.168.1.100&quot;,\n        &quot;createdAt&quot;: &quot;2024-06-15T10:00:00Z&quot;\n      }\n    ],\n    &quot;total&quot;: 120\n  }\n}</pre><h4 data-v-7ce9ed84>模块值参考</h4><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>模块值</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>用户管理</td><td data-v-7ce9ed84>用户的增删改、状态更新、密码重置</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>角色管理</td><td data-v-7ce9ed84>角色的增删改、权限分配</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>安全中心</td><td data-v-7ce9ed84>白名单管理、安全配置变更</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>系统设置</td><td data-v-7ce9ed84>UI配置、LDAP、HTTPS等系统配置</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>钉钉管理</td><td data-v-7ce9ed84>钉钉同步、配置变更</td></tr></table></div></div><div class="doc-section" id="error-codes" data-v-7ce9ed84><h2 data-v-7ce9ed84>6. 错误码说明</h2><table class="doc-table" data-v-7ce9ed84><tr data-v-7ce9ed84><th data-v-7ce9ed84>HTTP 状态码</th><th data-v-7ce9ed84>含义</th><th data-v-7ce9ed84>说明</th></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>200</td><td data-v-7ce9ed84>成功</td><td data-v-7ce9ed84>请求处理成功</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>400</td><td data-v-7ce9ed84>请求错误</td><td data-v-7ce9ed84>请求参数有误</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>401</td><td data-v-7ce9ed84>未认证</td><td data-v-7ce9ed84>Token 无效或已过期，需重新登录</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>403</td><td data-v-7ce9ed84>无权限</td><td data-v-7ce9ed84>当前用户无权访问此接口，或 IP 不在白名单中</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>404</td><td data-v-7ce9ed84>不存在</td><td data-v-7ce9ed84>请求的资源不存在</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>429</td><td data-v-7ce9ed84>请求过多</td><td data-v-7ce9ed84>超出频率限制，请稍后重试</td></tr><tr data-v-7ce9ed84><td data-v-7ce9ed84>500</td><td data-v-7ce9ed84>服务器错误</td><td data-v-7ce9ed84>服务器内部错误</td></tr></table></div>',7))],512)])}}}),[["__scopeId","data-v-7ce9ed84"]]);export{T as default};
